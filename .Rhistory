y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = c(10, -10, 0.2, 50),  # Different x positions for each facet
y_pos = c(-30, 30, 0.7, 120),  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label, inherit.aes = FALSE),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = c(10, -10, 0.2, 50),  # Different x positions for each facet
y_pos = c(-30, 30, 0.7, 120),  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(label = label, inherit.aes = FALSE),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = c(10, -10, 0.2, 50),  # Different x positions for each facet
y_pos = c(-30, 30, 0.7, 120),  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = c(10, 28, 0.7, 120),  # Different x positions for each facet
y_pos = c(-30, -10, 0.2, 50),  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(x) max(x) - ((max(x)- min(x)) * 0.2)),  # Different x positions for each facet
y_pos = c(-30, -10, 0.2, 50),  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(y) {
x <- na.omit(dat$measure[dat$measure == y])
max(x) - ((max(x)- min(x)) * 0.2))
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.2)
return(res)
})
x_pos
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.2)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.2)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.3)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.1)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic()
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.1)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic() + theme(legend.position="none")
combined_gg <- ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic() + theme(legend.position="none")
combined_gg <- ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic(base_size = 12) + theme(legend.position="none")
combined_gg
comb_data_cols <- read.csv("./data/processed/combined_sigpro_barulho.csv")
dat <- data.frame(measure = character(), x = numeric(), y = numeric())
for (i in c("TSR", "SNR", "blur_ratio", "excess_attenuation")){
# clips
x <- comb_data_cols[comb_data_cols$format ==
"Clips", i]
y <- comb_data_cols[comb_data_cols$format == "Clips",
paste(i, "bRlho", sep = ".")]
cr.clps <- cor.test(x, y, use = "pairwise.complete.obs")
p <- round(cr.clps$p.value, 3)
ranges <- data.frame(measure = i, x = range(c(x, y), na.rm = TRUE), y = range(c(x, y), na.rm = TRUE), type = "range", p = NA, cor = NA)
datos <- data.frame(measure = i, x = x, y = y, cor = cr.clps$estimate, p = cr.clps$p.value, type = "obs", row.names = NULL)
datos <- rbind(ranges, datos)
dat <- rbind(dat, datos)
}
table(dat$measure, dat$type)
dat$measure <- factor(dat$measure, levels = c("TSR", "SNR", "blur_ratio", "excess_attenuation"))
levels(dat$measure) <- c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation")
x_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.05)
return(res)
})
y_pos <- sapply(c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"), function(i) {
x <- na.omit(dat$x[dat$measure == i])
res <- max(x) - ((max(x)- min(x)) * 0.8)
return(res)
})
# Create a new data frame with annotation text and position for each class
annotation_data <- data.frame(
measure = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"),
x_pos = x_pos,  # Different y positions for each facet
y_pos = y_pos,  # Different y positions for each facet
label = c("0.81", "0.95", "0.84", "0.98")
)
annotation_data$measure <- factor(annotation_data$measure, levels = c("Tail-to-signal ratio", "Signal-to-noise ratio", "Blur ratio", "Excess attenuation"))
combined_gg <- ggplot(dat, aes(x = x, y = y, color = type)) +
geom_point() +
scale_color_manual(values = c(viridis(10, alpha = 0.7)[7], "white")) +
facet_wrap( ~ measure, scales = "free") +
labs(x = "SIGPRO", y = "baRulho") +
geom_abline(slope = 1,
intercept = 0,
lty = 3) +
geom_text(data = annotation_data, aes(x = x_pos, y = y_pos, label = label),
color = "orange", size = 5) +
theme_classic(base_size = 12) + theme(legend.position="none")
ggsave(plot = combined_gg, filename = "./output/presentation/images/pvalues_grid.jpeg", dpi =  300)
ggsave(plot = combined_gg, filename = "./output/barulho_vs_sigpro.jpeg", dpi =  300)
ggsave(plot = combined_gg, filename = "./output/barulho_vs_sigpro.jpeg", dpi =  300, width = 12, height = 12)
ggsave(plot = combined_gg, filename = "./output/barulho_vs_sigpro.jpeg", dpi =  300, width = 5, height = 5)
ggsave(plot = combined_gg, filename = "./output/barulho_vs_sigpro.jpeg", dpi =  300, width = 5, height = 3)
ggsave(plot = combined_gg, filename = "./output/barulho_vs_sigpro.jpeg", dpi =  300, width = 7, height = 4)
library(brms)
options(marcelo = 100)
getOption("marcelo")
